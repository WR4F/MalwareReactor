let prevImage;

function imageExists(url, callback) {
	var img = new Image();
	img.onload = function() { callback(true); };
	img.onerror = function() { callback(false); };
	img.src = url;
}

setInterval(() => {
	try {
		let streamScreens = document.getElementsByClassName("imageView");
		for (let index = 0; index < streamScreens.length; index++) {
			const element = streamScreens[index];
			// get the url before setting it to the background, only after comparing the previous and current one

			let image = "images/picture.png#" + new Date().getTime();
			imageExists(image, function(exists) {
				// console.log('RESULT: url=' + imageUrl + ', exists=' + exists);
				if(exists){
					element.style.backgroundImage = "url('"+image+"')";
					console.log("Updated stream");
				}
			});
		}
	} catch (error) {
		console.log("ERROR: " + error)
	}
}, 1000)