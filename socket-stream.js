var channel = location.href.replace(/\/|:|#|%|\.|\[|\]/g, '');
var sender = Math.round(Math.random() * 999999999) + 999999999; // user ID from 8base

var SIGNALING_SERVER = 'https://webrtcweb.com:9559/';
io.connect(SIGNALING_SERVER).emit('camStream', {
	channel: channel,
	sender: sender
});

var socket = io.connect(SIGNALING_SERVER + channel);
socket.send = function (message) {
	socket.emit('message', {
		sender: sender,
		data: message
	});
};

// pass "socket" object over the constructor instead of URL
var peer = new PeerConnection(socket);